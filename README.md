# ì—”ì¹´ ì‹œì„¸ í¬ë¡¤ëŸ¬ (Encar Price Crawler)

ì—”ì¹´(encar.com)ì˜ ì°¨ëŸ‰ ì‹œì„¸ ì •ë³´ë¥¼ ìžë™ìœ¼ë¡œ í¬ë¡¤ë§í•˜ëŠ” íŒŒì´ì¬ í”„ë¡œì íŠ¸ìž…ë‹ˆë‹¤.

âš ï¸ **ì¤‘ìš”**: ì—”ì¹´ ì›¹ì‚¬ì´íŠ¸ êµ¬ì¡°ê°€ ë³€ê²½ë˜ì–´ ì‹œì„¸ íŽ˜ì´ì§€ ì ‘ê·¼ ë°©ì‹ì´ ë‹¬ë¼ì¡ŒìŠµë‹ˆë‹¤.
í˜„ìž¬ í”„ë ˆìž„ì›Œí¬ëŠ” ì™„ì„±ë˜ì—ˆìœ¼ë©°, íŽ˜ì´ì§€ êµ¬ì¡°ì— ë§žê²Œ ì…€ë ‰í„°ë¥¼ ìˆ˜ì •í•˜ì—¬ ì‚¬ìš©í•˜ì‹œë©´ ë©ë‹ˆë‹¤.

## ðŸš€ ì£¼ìš” ê¸°ëŠ¥

- ëª¨ë“  ì°¨ëŸ‰ ì˜µì…˜ ì¡°í•©ì˜ ì‹œì„¸ ìžë™ í¬ë¡¤ë§
- DOM ìž¬ë Œë”ë§ ë¬¸ì œ í•´ê²°
- ë°ì´í„°ë² ì´ìŠ¤ ìžë™ ì €ìž¥
- ìž¬ì‹œë„ ë¡œì§ ë° ì—ëŸ¬ ì²˜ë¦¬
- ì‹¤ì‹œê°„ ì§„í–‰ ìƒí™© í‘œì‹œ

## ðŸ“‹ ìš”êµ¬ì‚¬í•­

- Python 3.8+
- MySQL 5.7+ (ë˜ëŠ” SQLite)
- Chrome ë¸Œë¼ìš°ì €

## ðŸ”§ ì„¤ì¹˜ ë°©ë²•

### 1. í”„ë¡œì íŠ¸ í´ë¡ 
```bash
cd ~/encar-crawling
```

### 2. ê°€ìƒí™˜ê²½ ìƒì„± ë° í™œì„±í™”
```bash
python -m venv venv
source venv/bin/activate  # macOS/Linux
# venv\Scripts\activate  # Windows
```

### 3. íŒ¨í‚¤ì§€ ì„¤ì¹˜
```bash
pip install -r requirements.txt
```

### 4. Playwright ë¸Œë¼ìš°ì € ì„¤ì¹˜
```bash
playwright install chromium
```

### 5. í™˜ê²½ ì„¤ì •
```bash
# .env íŒŒì¼ ìƒì„±
cat > .env << EOF
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=your_password
DB_NAME=encar_prices
EOF
```

### 6. ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™”
```bash
python main.py --init-db
```

## ðŸ’» ì‚¬ìš© ë°©ë²•

### ì „ì²´ í¬ë¡¤ë§ ì‹¤í–‰
```bash
python main.py
```

### í…ŒìŠ¤íŠ¸ ëª¨ë“œ (ë‹¨ì¼ ì¡°í•©)
```bash
python main.py --test
```

### Headless ëª¨ë“œë¡œ ì‹¤í–‰
```bash
python main.py --headless
```

### í¬ë¡¤ë§ í†µê³„ í™•ì¸
```bash
python main.py --stats
```

## ðŸ—„ï¸ ë°ì´í„°ë² ì´ìŠ¤ êµ¬ì¡°

### car_prices í…Œì´ë¸”
- `manufacturer`: ì œì¡°ì‚¬
- `model`: ëª¨ë¸
- `detailed_model`: ì„¸ë¶€ëª¨ë¸
- `year`: ì—°ì‹
- `fuel_type`: ì—°ë£Œ
- `grade`: ë“±ê¸‰
- `detailed_grade`: ì„¸ë¶€ë“±ê¸‰
- `price`: ì‹œì„¸ (ë§Œì›)
- `is_price_available`: ì‹œì„¸ ì œê³µ ì—¬ë¶€
- `crawled_at`: í¬ë¡¤ë§ ì‹œê°„

## âš™ï¸ ì„¤ì • ì˜µì…˜

`config.py` íŒŒì¼ì—ì„œ ë‹¤ìŒ ì„¤ì •ì„ ë³€ê²½í•  ìˆ˜ ìžˆìŠµë‹ˆë‹¤:

- `HEADLESS`: ë¸Œë¼ìš°ì € í‘œì‹œ ì—¬ë¶€ (False=í‘œì‹œ, True=ìˆ¨ê¹€)
- `TIMEOUT`: ìš”ì†Œ ëŒ€ê¸° ì‹œê°„ (ë°€ë¦¬ì´ˆ)
- `RETRY_COUNT`: ìž¬ì‹œë„ íšŸìˆ˜
- `WAIT_BETWEEN_ACTIONS`: ì•¡ì…˜ ê°„ ëŒ€ê¸° ì‹œê°„ (ë°€ë¦¬ì´ˆ)

## ðŸ” ë¬¸ì œ í•´ê²°

### MySQL ì—°ê²° ì˜¤ë¥˜
SQLiteë¡œ ì „í™˜í•˜ë ¤ë©´ `database.py`ì˜ `get_db_engine()` í•¨ìˆ˜ì—ì„œ:
```python
# MySQL ëŒ€ì‹  SQLite ì‚¬ìš©
connection_string = "sqlite:///encar_prices.db"
```

### DOM ìž¬ë Œë”ë§ ë¬¸ì œ
- `WAIT_BETWEEN_ACTIONS` ê°’ì„ ëŠ˜ë ¤ë³´ì„¸ìš” (ê¸°ë³¸: 1500ms)
- `HEADLESS`ë¥¼ Falseë¡œ ì„¤ì •í•˜ì—¬ ë¬¸ì œë¥¼ ì‹œê°ì ìœ¼ë¡œ í™•ì¸

### í¬ë¡¤ë§ ì†ë„ê°€ ëŠë¦° ê²½ìš°
- ë³‘ë ¬ ì²˜ë¦¬ëŠ” ì—”ì¹´ ì„œë²„ì— ë¶€ë‹´ì„ ì¤„ ìˆ˜ ìžˆìœ¼ë¯€ë¡œ ê¶Œìž¥í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤
- ì•¼ê°„ ì‹œê°„ëŒ€ì— ì‹¤í–‰í•˜ëŠ” ê²ƒì„ ê¶Œìž¥í•©ë‹ˆë‹¤

## âš ï¸ ì£¼ì˜ì‚¬í•­

1. **robots.txt ì¤€ìˆ˜**: ì´ í¬ë¡¤ëŸ¬ëŠ” ì—”ì¹´ì˜ robots.txtë¥¼ ì¤€ìˆ˜í•©ë‹ˆë‹¤
2. **ì„œë²„ ë¶€ë‹´ ìµœì†Œí™”**: ê³¼ë„í•œ ìš”ì²­ì„ í”¼í•˜ê¸° ìœ„í•´ ì ì ˆí•œ ë”œë ˆì´ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤
3. **ê°œì¸ ìš©ë„**: ìƒì—…ì  ì‚¬ìš© ì‹œ ì—”ì¹´ì˜ ì´ìš©ì•½ê´€ì„ í™•ì¸í•˜ì„¸ìš”
4. **ë°ì´í„° ì •í™•ì„±**: í¬ë¡¤ë§ëœ ë°ì´í„°ëŠ” ì°¸ê³ ìš©ì´ë©°, ì‹¤ì œ ê±°ëž˜ ì‹œ ì—”ì¹´ì—ì„œ ì§ì ‘ í™•ì¸í•˜ì„¸ìš”

## ðŸ“Š ì˜ˆìƒ ì†Œìš” ì‹œê°„

- ì „ì²´ ì˜µì…˜ ì¡°í•©: ì•½ 10,000-50,000ê°œ (ì°¨ëŸ‰ ì¢…ë¥˜ì— ë”°ë¼ ë‹¤ë¦„)
- ì˜ˆìƒ ì‹œê°„: 5-20ì‹œê°„ (ë„¤íŠ¸ì›Œí¬ ìƒíƒœì™€ ì˜µì…˜ ìˆ˜ì— ë”°ë¼ ë‹¤ë¦„)
- ê¶Œìž¥: ì•¼ê°„ì— ì‹¤í–‰í•˜ê±°ë‚˜ íŠ¹ì • ì œì¡°ì‚¬ë§Œ ì„ íƒí•˜ì—¬ í¬ë¡¤ë§

## ðŸ› ï¸ ê°œë°œ ëª¨ë“œ

### íŠ¹ì • ì œì¡°ì‚¬ë§Œ í¬ë¡¤ë§
`crawler.py`ì˜ `crawl_all_combinations()` í•¨ìˆ˜ì—ì„œ ì œì¡°ì‚¬ í•„í„°ë§:
```python
manufacturers = [m for m in manufacturers if 'í˜„ëŒ€' in m['text']]
```

### ë””ë²„ê·¸ ëª¨ë“œ
```python
# crawler.pyì—ì„œ
self.headless = False  # ë¸Œë¼ìš°ì € í‘œì‹œ
console.print(f"[debug]{ë³€ìˆ˜ëª…}[/debug]")  # ë””ë²„ê·¸ ì¶œë ¥
```

## ðŸ“ ë¼ì´ì„¼ìŠ¤

ì´ í”„ë¡œì íŠ¸ëŠ” êµìœ¡ ë° ì—°êµ¬ ëª©ì ìœ¼ë¡œë§Œ ì‚¬ìš©í•˜ì„¸ìš”.
